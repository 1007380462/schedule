<?php
namespace App\Http\Controllers;

use App\Parsedown;
use Illuminate\Http\Request;
use App\Http\Requests;

class HomeController extends Controller{
    public function __call($method, $parameters)
    {
        parent::__call($method, $parameters); // TODO: Change the autogenerated stub
    }

    public function index(){
        $parsedown=new Parsedown();
        $a='# My article
 Welcome to my article,
* Point one
* Point two
* Point three
```
<?php
foreach(range(1,10) as $k){
echo $x;
}
?>
```
Here is some echo `\'inline code\'`;';
        $a=file_get_contents(public_path('jdy.txt'));

        $fileContent='';
        $time=0;
        /*get directory of file*/
        $handle=fopen(public_path('jdy.txt'),'r');

        while(! feof($handle)){
        $lineStr=fgets($handle);
        $firstCharacter=substr($lineStr,0,1);
        if($firstCharacter=='#'){
            if($firstCharacter=='#'){
                /*express this is h1*/
                $anchor='<p><a name='.$time.'></a></p>';
                $fileContent.=$anchor;
                $fileContent.=$lineStr;
                $time++;
            }
            if(substr($lineStr,0,2)=='##'){
                /*express this is h2*/
                $anchor='<p><a name='.$time.'></a></p>';
                $fileContent.=$anchor;
                $fileContent.=$lineStr;
                $time++;
            }
            if(substr($lineStr,0,3)=='###'){
                /*express this is h3*/
                $anchor='<p><a name='.$time.'></a></p>';
                $fileContent.=$anchor;
                $fileContent.=$lineStr;
                $time++;
            }
            if(substr($lineStr,0,4)=='####'){
                /*express this is h4*/
                $anchor='<p><a name='.$time.'></a></p>';
                $fileContent.=$anchor;
                $fileContent.=$lineStr;
                $time++;
            }
        }else{
            $fileContent.=$lineStr;
        }

        }

        $lineStr=fgets($handle);
        $b= Parsedown::instance()->text($lineStr);

        return view('blog.index',['text'=>$b]);

    }
}